<script>
    var event_markers = [
        {% if map_location %}
            { lat: {{ location.coords.y }}, lng: {{ location.coords.x }} },
        {% elif map_locations %}
            {% for location in map_locations %}
                { lat: {{ location.coords.y }}, lng: {{ location.coords.x }} },
            {% endfor %}
        {% endif %}
    ];

    function initMap() {
        var map = new google.maps.Map(
            document.getElementById('map'),
            {
                zoom: {{ map_zoom|default:6 }},
                center:
                    {% if map_location %}
                        event_markers[0],
                    {% else %}
                        { lat: -41, lng: 174 },
                    {% endif %}
            }
        );
        for (var i = 0; i < event_markers.length; i++) {
            var marker = new google.maps.Marker({ position: event_markers[i], map: map });
        }
    }
</script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&callback=initMap">
</script>
